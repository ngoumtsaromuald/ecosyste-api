# Generated TypeScript Types

This directory contains automatically generated TypeScript types from the OpenAPI specification of the ROMAPI Backend Core API.

## Files

### `api.ts`
The main API types file generated by `openapi-typescript`. Contains:
- `paths` interface with all API endpoints
- `components` interface with all schemas
- `operations` interface with operation definitions

### `api-utils.ts`
Utility types and helpers for working with the API:
- Standard response wrappers (`ApiResponse`, `PaginatedResponse`)
- Extracted request/response types
- Enum type aliases
- Type guards and utility functions

### `validators.ts`
Runtime type validation helpers:
- `TypeValidators` class with validation methods for enums and common types
- Schema validation functions for DTOs
- Type guards for API responses

### `client.ts`
API client interface definitions:
- `RomapiClient` interface defining the complete API client
- Endpoint-specific interfaces (`ApiResourcesEndpoints`, `CategoriesEndpoints`)
- Request/response configuration types
- Error handling types

## Usage

### Basic Type Usage

```typescript
import type { 
  ApiResourceResponse, 
  CreateApiResourceRequest,
  ApiResponse 
} from './api-utils';

// Use in function signatures
async function createResource(
  data: CreateApiResourceRequest
): Promise<ApiResponse<ApiResourceResponse>> {
  // Implementation
}
```

### Type Validation

```typescript
import { TypeValidators } from './validators';

// Runtime validation
if (TypeValidators.isResourceType(value)) {
  // value is now typed as ResourceType
}

if (TypeValidators.isUUID(id)) {
  // id is now typed as string (UUID format)
}
```

### API Client Types

```typescript
import type { RomapiClient, ApiClientConfig } from './client';

// Implement API client
class MyApiClient implements RomapiClient {
  // Implementation must match the interface
}

// Configure client
const config: ApiClientConfig = {
  baseURL: 'https://api.romapi.com',
  timeout: 5000,
  authToken: 'your-jwt-token'
};
```

## Generation Scripts

### `npm run types:generate`
Generates all TypeScript types from the current OpenAPI specification.

### `npm run types:watch`
Watches for changes in the source code and automatically regenerates types.

### `npm run types:test`
Runs comprehensive tests to verify type generation is working correctly.

### `npm run build:types`
Generates types and then builds the application.

## Automatic Generation

Types are automatically generated from:
1. **Controller decorators**: `@ApiOperation`, `@ApiResponse`, etc.
2. **DTO classes**: Request/response DTOs with `@ApiProperty` decorators
3. **Enum definitions**: Exposed through enum DTOs for OpenAPI compatibility

## Type Safety Features

### Enum Safety
All enums are properly typed and validated:
```typescript
type ResourceType = "BUSINESS" | "SERVICE" | "DATA" | "API";
```

### Response Standardization
All API responses follow a standard format:
```typescript
interface ApiResponse<T> {
  success: boolean;
  data: T;
  timestamp: string;
}
```

### Error Handling
Standardized error responses:
```typescript
interface ApiErrorResponse {
  success: false;
  error: {
    code: string;
    message: string;
    timestamp: string;
    path: string;
    method: string;
  };
}
```

## Best Practices

1. **Never edit generated files manually** - They will be overwritten
2. **Use type imports** - Import types with `import type` for better tree-shaking
3. **Validate at runtime** - Use the provided validators for runtime type checking
4. **Update OpenAPI decorators** - Keep controller decorators up to date for accurate types

## Troubleshooting

### Types not updating
Run `npm run types:generate` to manually regenerate types.

### Compilation errors
Check that all enum DTOs are properly exported and referenced in controllers.

### Missing schemas
Ensure DTOs are properly decorated with `@ApiProperty` and used in controller methods.

### Duplicate operation IDs
The system automatically generates unique operation IDs by combining controller and method names.

## Integration with Development Workflow

The type generation system integrates with the development workflow:

1. **Development**: Use `npm run types:watch` during development
2. **Build**: Types are generated as part of `npm run build:types`
3. **CI/CD**: Include type generation in build pipelines
4. **Testing**: Types are validated in the test suite

This ensures that frontend applications and API consumers always have up-to-date, type-safe interfaces for the ROMAPI Backend Core API.